<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>فكر - قائمة المهام</title>
    
    <!-- تحميل Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- تحميل الخطوط العربية -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* تأكيد أن الخلفية تغطي الشاشة بالكامل */
        html, body {
            height: 100%; 
            margin: 0;
            padding: 0;
        }

        /* تطبيق الخطوط والتصميم الأساسي */
        body {
            /* خلفية سوداء خالصة مع نقاط ذهبية */
            background-color: #000000;
            background-image: 
                radial-gradient(circle at 1px 1px, #D4AF37 1px, transparent 0); /* D4AF37 لون ذهبي */
            background-size: 25px 25px;
            
            font-family: 'Amiri', serif;
            color: #f0f0f0; 
        }

        /* توحيد خط العنوان الرئيسي ليصبح مثل خط الآيات (Amiri) */
        h1 {
            font-family: 'Amiri', serif;
        }
        
        /* تصميم انتقال ناعم لتأثير الشطب وتغيير اللون */
        .task-text {
            /* تطبيق الانتقال على اللون وتأثير الشطب (إذا كان متوفراً في المتصفح) */
            transition: color 0.3s ease-in-out, opacity 0.3s ease-in-out; 
            display: inline-block;
        }

        /* حالة المهمة المكتملة */
        .completed-task {
            text-decoration: line-through;
            color: #555 !important; /* لون رمادي خفيف بعد الانتهاء */
            opacity: 0.7;
        }

        /* تعديل لون شريط التمرير (اختياري) */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #2d2d2d;
        }
        ::-webkit-scrollbar-thumb {
            background: #D4AF37;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #b89b34;
        }
    </style>
</head>
<body> 

    <div class="container mx-auto max-w-lg mt-12 mb-12 p-6">
        
        <!-- تعديل البطاقة الرئيسية لتتناسب مع التصميم الداكن -->
        <div class="bg-gray-900 bg-opacity-90 backdrop-blur-sm border border-gray-700 rounded-xl shadow-lg p-6">
            
            <!-- العنوان: "فكر" باللون الذهبي -->
            <h1 class="text-5xl font-bold text-center text-yellow-400 mb-4" style="font-family: 'Amiri', serif;">فِكر</h1>

            <!-- الآيات القرآنية الملهمة الرئيسية -->
            <div class="text-center my-6 space-y-3">
                <p class="text-xl text-yellow-500" style="font-family: 'Amiri', serif;">"وَأَن لَّيْسَ لِلإِنسَانِ إِلَّا مَا سَعَىٰ"</p>
                <p class="text-lg text-yellow-600" style="font-family: 'Amiri', serif;">"إِنَّ مَعَ الْعُسْرِ يُسْرًا"</p>
            </div>

            <!-- نموذج الإدخال (بتصميم داكن وذهبي) -->
            <div class="flex flex-col sm:flex-row gap-2 mb-4">
                <input 
                    type="text" 
                    id="taskInput" 
                    placeholder="أضف مهمة جديدة..." 
                    class="flex-grow p-3 bg-gray-800 border border-gray-600 text-gray-100 placeholder-gray-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition"
                >
                <button 
                    id="addTaskBtn" 
                    class="w-full sm:w-auto bg-yellow-600 text-gray-900 px-6 py-3 rounded-lg font-bold hover:bg-yellow-500 transition shadow-md focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-opacity-75"
                >
                    إضافة
                </button>
            </div>

            <!-- قائمة المهام -->
            <ul id="taskList" class="space-y-3">
                <!-- المهام ستضاف هنا عبر جافاسكريبت -->
            </ul>

        </div>

        <!-- رسالة الخطأ (بتصميم ذهبي) -->
        <div id="error-message" class="hidden fixed top-5 left-1/2 -translate-x-1/2 bg-yellow-100 border border-yellow-400 text-yellow-800 px-4 py-3 rounded-lg shadow-lg" role="alert">
            <strong class="font-bold">خطأ!</strong>
            <span class="block sm:inline">الرجاء إدخال نص للمهمة.</span>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            const taskInput = document.getElementById('taskInput');
            const addTaskBtn = document.getElementById('addTaskBtn');
            const taskList = document.getElementById('taskList');
            const errorMessage = document.getElementById('error-message');
            let errorTimeout; 

            // قائمة واسعة بالآيات الملهمة والبهيجة (حوالي 100 آية)
            const quranicVerses = [
                "فَاصْبِرْ إِنَّ وَعْدَ اللَّهِ حَقٌّ ۖ", 
                "وَمَا تَوْفِيقِي إِلَّا بِاللَّهِ", 
                "لَا تَقْنَطُوا مِن رَّحْمَةِ اللَّهِ", 
                "عَسَىٰ رَبُّنَا أَن يُبْدِلَنَا خَيْرًا مِّنْهَا", 
                "إِنَّ اللَّهَ لَا يُضِيعُ أَجْرَ الْمُحْسِنِينَ", 
                "وَمَن يَتَّقِ اللَّهَ يَجْعَل لَّهُ مَخْرَجًا",
                "لَا يُكَلِّفُ اللَّهُ نَفْسًا إِلَّا وُسْعَهَا",
                "وَلَسَوْفَ يُعْطِيكَ رَبُّكَ فَتَرْضَىٰ",
                "لَا تَدْرِي لَعَلَّ اللَّهَ يُحْدِثُ بَعْدَ ذَٰلِكَ أَمْرًا",
                "إِنَّ مَعَ الْعُسْرِ يُسْرًا",
                "كَتَبَ رَبُّكُمْ عَلَىٰ نَفْسِهِ الرَّحْمَةَ",
                "وَمَن يَتَوَكَّلْ عَلَى اللَّهِ فَهُوَ حَسْبُهُ",
                "ادْعُونِي أَسْتَجِبْ لَكُمْ",
                "إِنَّ رَحْمَتَ اللَّهِ قَرِيبٌ مِّنَ الْمُحْسِنِينَ",
                "فَاسْتَبِقُوا الْخَيْرَاتِ",
                "أَلَا بِذِكْرِ اللَّهِ تَطْمَئِنُّ الْقُلُوبُ",
                "فَإِذَا عَزَمْتَ فَتَوَكَّلْ عَلَى اللَّهِ",
                "وَبَشِّرِ الصَّابِرِينَ",
                "وَلَا تَيْأَسُوا مِن رَّوْحِ اللَّهِ",
                "وَاسْتَعِينُوا بِالصَّبْرِ وَالصَّلَاةِ",
                "وَعَسَى أَن تَكْرَهُوا شَيْئًا وَهُوَ خَيْرٌ لَّكُمْ",
                "قُلْ يَا عِبَادِيَ الَّذِينَ أَسْرَفُوا عَلَىٰ أَنفُسِهِمْ لَا تَقْنَطُوا مِن رَّحْمَةِ اللَّهِ",
                "وَتَوَكَّلْ عَلَى الْحَيِّ الَّذِي لَا يَمُوتُ",
                "وَمَا عِندَ اللَّهِ خَيْرٌ لِّلْأَبْرَارِ",
                "سَلَامٌ عَلَيْكُم بِمَا صَبَرْتُمْ فَنِعْمَ عُقْبَى الدَّارِ",
                "إِنَّ اللَّهَ مَعَ الَّذِينَ اتَّقَوا وَّالَّذِينَ هُم مُّحْسِنُونَ",
                "وَلَا تَحْزَنْ عَلَيْهِمْ وَلَا تَكُ فِي ضَيْقٍ مِّمَّا يَمْكُرُونَ",
                "وَقُل رَّبِّ زِدْنِي عِلْمًا",
                "فَذَكِّرْ إِنَّمَا أَنتَ مُذَكِّرٌ",
                "وَسَارِعُوا إِلَىٰ مَغْفِرَةٍ مِّن رَّبِّكُمْ",
                "وَاللَّهُ يَدْعُو إِلَىٰ دَارِ السَّلَامِ",
                "إِنَّ اللَّهَ عَلَىٰ كُلِّ شَيْءٍ قَدِيرٌ",
                "وَأُفَوِّضُ أَمْرِي إِلَى اللَّهِ",
                "فَاصْبِرْ صَبْرًا جَمِيلًا",
                "يُؤْتِي الْحِكْمَةَ مَن يَشَاءُ",
                "لَا يَسْأَمُ الْإِنسَانُ مِن دُعَاءِ الْخَيْرِ",
                "فَاصْبِرْ عَلَىٰ مَا يَقُولُونَ",
                "وَاجْعَل لِّي لِسَانَ صِدْقٍ فِي الْآخِرِينَ",
                "وَأَنِيبُوا إِلَىٰ رَبِّكُمْ وَأَسْلِمُوا لَهُ",
                "وَاللَّهُ يَقْضِي بِالْحَقِّ",
                "وَاللَّهُ يَعْلَمُ وَأَنتُمْ لَا تَعْلَمُونَ",
                "رَبَّنَا آتِنَا فِي الدُّنْيَا حَسَنَةً وَفِي الْآخِرَةِ حَسَنَةً",
                "وَهُوَ عَلَىٰ جَمْعِهِمْ إِذَا يَشَاءُ قَدِيرٌ",
                "وَمَن أَصْدَقُ مِنَ اللَّهِ حَدِيثًا",
                "إِنَّ اللَّهَ يُحِبُّ الَّذِينَ يُقَاتِلُونَ فِي سَبِيلِهِ صَفًّا",
                "لَا خَوْفٌ عَلَيْهِمْ وَلَا هُمْ يَحْزَنُونَ",
                "قُل لَّن يُصِيبَنَا إِلَّا مَا كَتَبَ اللَّهُ لَنَا",
                "إِنَّ اللَّهَ يُحِبُّ التَّوَّابِينَ وَيُحِبُّ الْمُتَطَهِّرِينَ",
                "قَدْ أَفْلَحَ مَن تَزَكَّىٰ",
                "تَبَارَكَ الَّذِي بِيَدِهِ الْمُلْكُ وَهُوَ عَلَىٰ كُلِّ شَيْءٍ قَدِيرٌ",
                "لِّمَن شَاءَ مِنكُمْ أَن يَتَقَدَّمَ أَوْ يَتَأَخَّرَ",
                
                // إضافة 50 آية جديدة
                "فَاسْتَجَبْنَا لَهُ وَنَجَّيْنَاهُ مِنَ الْغَمِّ", 
                "إِنَّ الْحَسَنَاتِ يُذْهِبْنَ السَّيِّئَاتِ",
                "وَلَمْ يَكُن لَّهُ كُفُوًا أَحَدٌ",
                "وَمَا النَّصْرُ إِلَّا مِنْ عِندِ اللَّهِ",
                "أَفَلَا يَتَدَبَّرُونَ الْقُرْآنَ",
                "وَاذْكُر رَّبَّكَ إِذَا نَسِيتَ",
                "وَأَحْسِنُوا إِنَّ اللَّهَ يُحِبُّ الْمُحْسِنِينَ",
                "وَسَيَعْلَمُ الَّذِينَ ظَلَمُوا أَيَّ مُنقَلَبٍ يَنقَلِبُونَ",
                "فَمَن يَعْمَلْ مِثْقَالَ ذَرَّةٍ خَيْرًا يَرَهُ",
                "وَتِلْكَ الْأَيَّامُ نُدَاوِلُهَا بَيْنَ النَّاسِ",
                "إِنَّ اللَّهَ يُحِبُّ الْمُتَوَكِّلِينَ",
                "وَاصْبِرْ وَمَا صَبْرُكَ إِلَّا بِاللَّهِ",
                "عَلَيْكُمْ أَنفُسَكُمْ لَا يَضُرُّكُم مَّن ضَلَّ إِذَا اهْتَدَيْتُمْ",
                "وَلَا تَقُولُوا لِمَن يُقْتَلُ فِي سَبِيلِ اللَّهِ أَمْوَاتٌ ۚ بَلْ أَحْيَاءٌ",
                "وَلَا تَهِنُوا وَلَا تَحْزَنُوا وَأَنتُمُ الْأَعْلَوْنَ إِن كُنتُم مُّؤْمِنِينَ",
                "إِنَّمَا يُوَفَّى الصَّابِرُونَ أَجْرَهُم بِغَيْرِ حِسَابٍ",
                "وَمَن يُطِعِ اللَّهَ وَرَسُولَهُ فَقَدْ فَازَ فَوْزًا عَظِيمًا",
                "وَالَّذِينَ آمَنُوا وَعَمِلُوا الصَّالِحَاتِ لَهُمْ جَنَّاتٌ تَجْرِي مِن تَحْتِهَا الْأَنْهَارُ",
                "قُلْ هَلْ يَسْتَوِي الَّذِينَ يَعْلَمُونَ وَالَّذِينَ لَا يَعْلَمُونَ",
                "وَالْعَاقِبَةُ لِلْمُتَّقِينَ",
                "وَأَمَّا مَنْ خَافَ مَقَامَ رَبِّهِ وَنَهَى النَّفْسَ عَنِ الْهَوَىٰ",
                "فَالَّذِينَ آمَنُوا وَعَمِلُوا الصَّالِحَاتِ لَهُمْ مَغْفِرَةٌ وَرِزْقٌ كَرِيمٌ",
                "وَلَا تَبْخَسُوا النَّاسَ أَشْيَاءَهُمْ",
                "وَاذْكُرُوا نِعْمَةَ اللَّهِ عَلَيْكُمْ",
                "قَدْ جَعَلَ اللَّهُ لِكُلِّ شَيْءٍ قَدْرًا",
                "وَمَا كَانَ اللَّهُ مُعَذِّبَهُمْ وَهُمْ يَسْتَغْفِرُونَ",
                "أَلَيْسَ اللَّهُ بِكَافٍ عَبْدَهُ",
                "وَقُولُوا قَوْلًا سَدِيدًا",
                "وَلَا تُفْسِدُوا فِي الْأَرْضِ بَعْدَ إِصْلَاحِهَا",
                "وَمَن يُؤْمِن بِاللَّهِ يَهْدِ قَلْبَهُ",
                "إِنَّا لَنَنصُرُ رُسُلَنَا وَالَّذِينَ آمَنُوا فِي الْحَيَاةِ الدُّنْيَا",
                "فَبِأَيِّ آلَاءِ رَبِّكُمَا تُكَذِّبَانِ",
                "وَاخْفِضْ لَهُمَا جَنَاحَ الذُّلِّ مِنَ الرَّحْمَةِ",
                "وَاصْبِرْ عَلَىٰ مَا أَصَابَكَ",
                "إِنَّ اللَّهَ لَا يُغَيِّرُ مَا بِقَوْمٍ حَتَّىٰ يُغَيِّرُوا مَا بِأَنفُسِهِمْ",
                "وَإِذَا سَأَلَكَ عِبَادِي عَنِّي فَإِنِّي قَرِيبٌ",
                "وَمَا خَلَقْتُ الْجِنَّ وَالْإِنسَ إِلَّا لِيَعْبُدُونِ",
                "فَسَبِّحْ بِحَمْدِ رَبِّكَ وَكُن مِّنَ السَّاجِدِينَ",
                "وَهُوَ الْغَفُورُ الْوَدُودُ",
                "وَمِنْ آيَاتِهِ خَلْقُ السَّمَاوَاتِ وَالْأَرْضِ",
                "الَّذِي أَحْسَنَ كُلَّ شَيْءٍ خَلَقَهُ",
                "إِنَّ رَبَّكَ لَبِالْمِرْصَادِ",
                "وَقُلِ اعْمَلُوا فَسَيَرَى اللَّهُ عَمَلَكُمْ",
                "يَرْفَعِ اللَّهُ الَّذِينَ آمَنُوا مِنكُمْ وَالَّذِينَ أُوتُوا الْعِلْمَ دَرَجَاتٍ",
                "فَأَيْنَمَا تُوَلُّوا فَثَمَّ وَجْهُ اللَّهِ",
                "وَأْمُرْ بِالْمَعْرُوفِ وَانْهَ عَنِ الْمُنكَرِ",
                "وَقَالَ رَبُّكُمُ ادْعُونِي أَسْتَجِبْ لَكُمْ",
                "أَلَا إِنَّ أَوْلِيَاءَ اللَّهِ لَا خَوْفٌ عَلَيْهِمْ وَلَا هُمْ يَحْزَنُونَ",
                "وَلَا تَيْأَسُوا مِن رَّوْحِ اللَّهِ",
                "وَأَنِ اشْكُرْ لِي وَلِوَالِدَيْكَ",
                "وَأَطِيعُوا اللَّهَ وَأَطِيعُوا الرَّسُولَ",
                "وَاللَّهُ خَيْرٌ وَأَبْقَىٰ"
            ];

            function getRandomVerse() {
                // دالة الاختيار العشوائي: تختار مؤشرًا عشوائيًا تمامًا من بين الـ 100 آية
                const randomIndex = Math.floor(Math.random() * quranicVerses.length);
                return quranicVerses[randomIndex];
            }

            function showErrorMessage(message) {
                if (errorTimeout) {
                    clearTimeout(errorTimeout);
                }
                
                errorMessage.querySelector('span').textContent = message;
                errorMessage.classList.remove('hidden');

                errorTimeout = setTimeout(() => {
                    errorMessage.classList.add('hidden');
                }, 3000);
            }

            function addTask() {
                const taskText = taskInput.value.trim(); 

                if (taskText === '') {
                    showErrorMessage('الرجاء إدخال نص للمهمة.');
                    return; 
                }
                
                // اختيار آية عشوائية
                const randomVerse = getRandomVerse();

                // إنشاء عنصر القائمة (li) بالتصميم الجديد
                const li = document.createElement('li');
                li.className = 'flex items-start justify-between bg-gray-800 p-4 rounded-lg transition duration-300 ease-in-out transform hover:scale-[1.02]';

                // حاوية النص والآية لمرونة العرض
                const textContainer = document.createElement('div');
                textContainer.className = 'flex flex-col sm:flex-row items-start sm:items-center flex-grow';

                // إنشاء عنصر النص (span) بالتصميم الجديد
                const taskSpan = document.createElement('span');
                taskSpan.textContent = taskText;
                taskSpan.className = 'task-text text-gray-100 cursor-pointer text-lg mb-1 sm:mb-0';
                taskSpan.style.fontFamily = 'Amiri, serif';
                
                // إنشاء عنصر الآية الملهمة
                const verseElement = document.createElement('small');
                // نستخدم ﴿ و ﴾ لتمثيل علامات الآيات
                verseElement.textContent = `﴿${randomVerse}﴾`;
                // تصميم ذهبي صغير وغير مزعج
                verseElement.className = 'text-yellow-500 text-opacity-75 text-xs italic sm:mr-3 whitespace-nowrap';
                verseElement.style.fontFamily = 'Amiri, serif';

                // تعديل حدث النقر لتطبيق الشطب الناعم
                taskSpan.addEventListener('click', () => {
                    taskSpan.classList.toggle('completed-task'); 
                    li.classList.toggle('bg-gray-700'); 
                });

                // زر الحذف (button)
                const deleteBtn = document.createElement('button');
                deleteBtn.textContent = 'حذف';
                deleteBtn.className = 'flex-shrink-0 text-red-500 hover:text-red-700 font-semibold text-sm transition mr-3'; 
                
                // **الإصلاح: إضافة وظيفة حذف العنصر بالكامل**
                deleteBtn.addEventListener('click', () => {
                    li.remove();
                });

                // تجميع العناصر
                textContainer.appendChild(taskSpan);
                textContainer.appendChild(verseElement);
                
                li.appendChild(textContainer);
                li.appendChild(deleteBtn);
                taskList.appendChild(li);

                taskInput.value = '';
                taskInput.focus();
            }

            addTaskBtn.addEventListener('click', addTask);
            taskInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    addTask();
                }
            });
        });
    </script>

</body>
</html>